Bootstrap: docker
From: centos 7

%post
        # install other needed packages
        yum clean all
        yum -y update
        yum -y install wget
        yum -y groupinstall "Development tools"
        yum install -y ncurses-devel gdbm-devel xz-devel sqlite-devel tk-devel uuid-devel readline-devel bzip2-devel libffi-devel
        yum install -y openssl-devel openssl11 openssl11-devel
        cd /opt
        export CFLAGS=$(pkg-config --cflags openssl11)
        export LDFLAGS=$(pkg-config --libs openssl11)
        wget https://www.python.org/ftp/python/3.10.4/Python-3.10.4.tgz
        tar -zxvf Python-3.10.4.tgz
        cd Python-3.10.4
        ./configure --prefix=/opt/python3 --enable-optimizations && make altinstall
        ln -sf /opt/python3/bin/python3 /usr/bin/python3
        ln -sf /opt/python3/bin/pip3 /usr/bin/pip3
        pip3 install --upgrade pip
        
        pip3 install django==3.2.9
 
#%environment
#       export PATH="${PATH}:/opt/hal/bin"

%files
        # Clone requirements.txt file
        . /opt/



%post
        # Build AUGUSTUS
        cd /opt/augustus
        make clean
        make
        make install INSTALLDIR=/opt/augustus

%environment
        export LC_ALL=C
        export PATH="/opt/augustus/bin:/opt/augustus/scripts:${PATH}"

%test
        # Test AUGUSTUS
        cd /opt/augustus
        make unit_test

%help
Create a Singularity Image File from this Singularity Definition File using
        $ git clone https://github.com/Gaius-Augustus/Augustus.git
        $ cd Augustus
        $ singularity build augustus.sif Singularity.def

Running an example (from the Augustus directory) with Singularity:
        $ singularity exec augustus.sif augustus --species=human --UTR=on examples/example.fa